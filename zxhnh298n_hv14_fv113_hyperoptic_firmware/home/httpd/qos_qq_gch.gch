<%IMPORT FILE "common_gch.gch";var FP_OBJNAME = "OBJ_QOSQQ_ID";var FP_MULTIDISPLAY = 1;var FP_PARANUM = 7;var PARA[7] ={"ViewName","QueueKey","QueueNum","Enable","Weight","Interface","Algorithm"};create_form_start("fSubmit", "");var FP_ACTION = request("IF_ACTION");var FP_INDEX = getInstIndex("new");var FP_ERRORSTR = "SUCC";createSubmitHidden(FP_MULTIDISPLAY, PARA, FP_PARANUM, FP_INDEX);var FP_INSTNUM = 0;var FP_IDENTITY = "";var FP_INTERFACE = request("IF_INTERFACE");if ("N/A"== FP_INTERFACE || "NULL"== FP_INTERFACE || ""== FP_INTERFACE){FP_INTERFACE = "WAN";}if(FP_ACTION == "apply"|| FP_ACTION == "delete"){FP_INSTNUM = query_list(FP_OBJNAME, FP_INTERFACE);if (FP_INSTNUM != 888 && FP_INSTNUM > 0 && FP_INDEX >= 0){FP_IDENTITY = query_identity(FP_INDEX);}}FP_ERRORSTR = applyOrNewOrDelInst(FP_OBJNAME, FP_ACTION, FP_IDENTITY, PARA, FP_PARANUM, FP_ERRORSTR);if("SUCC"!= FP_ERRORSTR){FP_INDEX = -1;FP_IDENTITY = "";}FP_INSTNUM = query_list(FP_OBJNAME, FP_INTERFACE);for (var i=0; i<FP_INSTNUM; i++){var FP_HANDLE = create_paralist();FP_IDENTITY = query_identity(i);get_inst(FP_HANDLE, FP_OBJNAME, FP_IDENTITY);create_hidden_multiinstpara(FP_HANDLE, PARA, i, FP_PARANUM);destroy_paralist(FP_HANDLE);}getDisplayInstError(FP_ERRORSTR);getDisplayInstError(FP_ERRORSTR);set_hidden("IF_INSTNUM", FP_INSTNUM);create_hidden_sep("IF_INTERFACE", FP_INTERFACE);create_form_end();%>